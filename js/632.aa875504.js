"use strict";(self["webpackChunkhope"]=self["webpackChunkhope"]||[]).push([[632],{2632:function(e,a,t){t.r(a),t.d(a,{default:function(){return ae}});var s=t(6252),l=t(3577),o=t(9963);const r=(0,s._)("div",{class:"loadingio-spinner-dual-ball-eq2qwqnc1x"},[(0,s._)("div",{class:"ldio-tw1s1a7kdy9"},[(0,s._)("div"),(0,s._)("div"),(0,s._)("div")])],-1),i=(0,s._)("div",{class:"pages-banner"},[(0,s._)("img",{src:"https://images.unsplash.com/photo-1508963493744-76fce69379c0?crop=entropy&cs=tinysrgb&fm=jpg&ixlib=rb-1.2.1&q=80&raw_url=true&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770",alt:""}),(0,s._)("h2",{class:"pages-banner-title"},"個人資料填寫")],-1),d=(0,s._)("div",{class:"frontcart-progress-list container"},[(0,s._)("div",{class:"mt-6"},[(0,s._)("div",{class:"progress"},[(0,s._)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:{width:"66.66%"}}," 60% ")])]),(0,s._)("div",{class:"mt-5"},[(0,s._)("div",{class:"frontcart-progress-title d-flex justify-content-center align-items-center"},[(0,s._)("h3",{class:"frontcart-progress-title-fir"},"購物車"),(0,s._)("h4",{class:"frontcart-progress-title-sec"},"個人資料填寫")])])],-1),c={class:"container"},n={class:"mt-4"},u={class:"row mb-4"},m={class:"col-lg-6 col-md-12"},p=(0,s._)("h5",{class:"text-center text-primary"},"訂單詳情",-1),f={class:"table align-middle"},h=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"服務項目"),(0,s._)("th",{scope:"col"},"單價"),(0,s._)("th",{scope:"col"},"數量"),(0,s._)("th",{scope:"col",class:"text-end"},"總計")])],-1),_=["src"],b={class:"text-end"},v=(0,s._)("td",{colspan:"2",class:"fw-bold"},"總金額",-1),g={colspan:"2",class:"text-end fw-bold"},w={key:0},x=(0,s._)("td",{colspan:"2",class:"fw-bold"},"折扣後總金額",-1),y={colspan:"2",class:"text-end fw-bold"},C={class:"input-group mb-3"},k={class:"col-lg-6 col-md-12"},V=(0,s._)("h5",{class:"text-center text-primary mb-3"},"填寫資料",-1),D={class:"row justify-content-center"},W={class:"mb-3"},q=(0,s._)("label",{for:"email",class:"form-label fw-bold"},"Email",-1),L={class:"mb-3"},$=(0,s._)("label",{for:"name",class:"form-label fw-bold"},"收件人姓名",-1),U={class:"mb-3"},T=(0,s._)("label",{for:"tel",class:"form-label fw-bold"},"收件人電話",-1),z={class:"mb-3"},j=(0,s._)("label",{for:"address",class:"form-label fw-bold"},"收件人地址",-1),I={class:"mb-3"},H=(0,s._)("label",{for:"select",class:"form-label fw-bold"},"付款方式",-1),O=(0,s._)("option",{selected:"",disabled:""},"選擇您的付款方式",-1),F=(0,s._)("option",{value:"現場付款"},"現場付款",-1),M=(0,s._)("option",{value:"信用卡付費"},"信用卡付費",-1),N=(0,s._)("option",{value:"信用卡分期付款"},"信用卡分期付款",-1),P=(0,s._)("option",{value:"銀行轉帳"},"銀行轉帳",-1),Y={class:"mb-3"},Z=(0,s._)("label",{for:"message",class:"form-label fw-bold"},"留言",-1),B={class:"step d-flex justify-content-between"},G={class:"text-start"},R=(0,s.Uk)(" 上一步 "),S={class:"text-end"},A=["disabled"];function E(e,a,t,E,K,J){const Q=(0,s.up)("LoadingPlugin"),X=(0,s.up)("v-field"),ee=(0,s.up)("error-message"),ae=(0,s.up)("router-link"),te=(0,s.up)("v-form");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(Q,{active:K.isLoading,"is-full-page":K.fullPage,"z-index":1060},{default:(0,s.w5)((()=>[r])),_:1},8,["active","is-full-page"]),i,d,(0,s._)("div",c,[(0,s._)("div",n,[(0,s._)("div",u,[(0,s._)("div",m,[p,(0,s._)("table",f,[h,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(K.cartData.carts,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("th",null,[(0,s._)("img",{src:e.product.imageUrl,class:"d-none d-sm-inline",style:{width:"60px",height:"60px"},alt:""},null,8,_),(0,s.Uk)(" "+(0,l.zw)(e.product.title),1)]),(0,s._)("td",null,(0,l.zw)(e.product.price),1),(0,s._)("td",null,(0,l.zw)(e.qty),1),(0,s._)("td",b,"NT$ "+(0,l.zw)(e.total),1)])))),128))]),(0,s._)("tfoot",null,[(0,s._)("tr",{class:(0,l.C_)({decorationLine:K.couponTotal})},[v,(0,s._)("td",g," NT$ "+(0,l.zw)(K.cartData.total),1)],2),K.couponTotal?((0,s.wg)(),(0,s.iD)("tr",w,[x,(0,s._)("td",y," NT$ "+(0,l.zw)(K.couponTotal),1)])):(0,s.kq)("",!0),(0,s._)("tr",null,[(0,s._)("div",C,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"輸入折扣碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":a[0]||(a[0]=e=>K.coupon=e)},null,512),[[o.nr,K.coupon,void 0,{trim:!0}]]),(0,s._)("button",{class:(0,l.C_)(["btn btn-success",{disabled:K.couponTotal}]),type:"button",id:"button-addon2",onClick:a[1]||(a[1]=(...e)=>J.postCoupon&&J.postCoupon(...e))}," 套用折扣碼 ",2)])])])])]),(0,s._)("div",k,[V,(0,s._)("div",D,[(0,s.Wm)(te,{ref:"form",onSubmit:a[8]||(a[8]=e=>J.createOrder())},{default:(0,s.w5)((({errors:e})=>[(0,s._)("div",W,[q,(0,s.Wm)(X,{id:"email",name:"email",type:"email",class:(0,l.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入電子郵件",rules:"required|email",modelValue:K.form.user.email,"onUpdate:modelValue":a[2]||(a[2]=e=>K.form.user.email=e)},null,8,["class","modelValue"]),(0,s.Wm)(ee,{name:"email",class:"invalid-feedback"})]),(0,s._)("div",L,[$,(0,s.Wm)(X,{id:"name",name:"姓名",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:K.form.user.name,"onUpdate:modelValue":a[3]||(a[3]=e=>K.form.user.name=e)},null,8,["class","modelValue"]),(0,s.Wm)(ee,{name:"姓名",class:"invalid-feedback"})]),(0,s._)("div",U,[T,(0,s.Wm)(X,{id:"tel",name:"電話",type:"tel",class:(0,l.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",modelValue:K.form.user.tel,"onUpdate:modelValue":a[4]||(a[4]=e=>K.form.user.tel=e),rules:"required|min:8|max:10"},null,8,["class","modelValue"]),(0,s.Wm)(ee,{name:"電話",class:"invalid-feedback"})]),(0,s._)("div",z,[j,(0,s.Wm)(X,{id:"address",name:"地址",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:K.form.user.address,"onUpdate:modelValue":a[5]||(a[5]=e=>K.form.user.address=e)},null,8,["class","modelValue"]),(0,s.Wm)(ee,{name:"地址",class:"invalid-feedback"})]),(0,s._)("div",I,[H,(0,s.Wm)(X,{as:"select",id:"select",name:"付款方式",class:(0,l.C_)(["form-select",{"is-invalid":e["付款方式"]}]),modelValue:K.form.user.pay,"onUpdate:modelValue":a[6]||(a[6]=e=>K.form.user.pay=e),rules:"required"},{default:(0,s.w5)((()=>[O,F,M,N,P])),_:2},1032,["modelValue","class"]),(0,s.Wm)(ee,{name:"付款方式",class:"invalid-feedback"})]),(0,s._)("div",Y,[Z,(0,s.wy)((0,s._)("textarea",{id:"message",class:"form-control",cols:"30",rows:"10",placeholder:"歡迎留下家中長輩的特殊需求，以便我們多加注意","onUpdate:modelValue":a[7]||(a[7]=e=>K.form.message=e)},null,512),[[o.nr,K.form.message]])]),(0,s._)("div",B,[(0,s._)("div",G,[(0,s.Wm)(ae,{class:"btn btn-outline-primary me-3",to:"/cart"},{default:(0,s.w5)((()=>[R])),_:1})]),(0,s._)("div",S,[(0,s._)("button",{disabled:Object.keys(e).length>0||0===K.cartData.carts.length,type:"submit",class:"btn btn-primary"}," 送出訂單 ",8,A)])])])),_:1},512)])])])])])],64)}var K=t(1608),J=t(5679),Q={data(){return{coupon:"",couponTotal:"",form:{user:{name:"",email:"",tel:"",address:"",pay:""},message:""},isLoading:!1,fullPage:!0,isLoadingItem:"",products:[],cartData:{carts:[]},orderData:{orderId:""}}},mixins:[K.Z],methods:{getCart(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/v2/api/david-frontend/cart";this.$http.get(e).then((e=>{this.cartData=e.data.data,this.checkCart(),this.isLoading=!1}))},postCoupon(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/v2/api/david-frontend/coupon",a={code:this.coupon};this.$http.post(e,{data:a}).then((e=>{e.data.success?(this.alertCouponSuccess(),this.couponTotal=e.data.data.final_total,this.getCart(),this.isLoading=!1):(this.alertCouponFalse(),this.isLoading=!1,this.coupon="")})).catch((()=>{this.alertCouponFalse(),this.isLoading=!1,this.coupon=""}))},resetCoupon(){},checkCart(){0===this.cartData.carts.length&&(this.alertRemindCart(),this.$router.push("/products"))},createOrder(){const e=this.form,a="https://vue3-course-api.hexschool.io/v2/api/david-frontend/order";this.$http.post(a,{data:e}).then((e=>{console.log("上傳成功",e),this.$refs.form.resetForm(),this.orderData.orderId=e.data.orderId;const a=`https://vue3-course-api.hexschool.io/v2/api/david-frontend/pay/${this.orderData.orderId}`;this.$http.post(a).then((()=>{this.alertCreateOrder(this.orderData.orderId,this.form.user.name,this.form.user.pay,this.cartData.final_total)})),J.Z.emit("get-cart"),this.$router.push("/complete")})).catch((e=>{console.dir(e)}))}},mounted(){this.getCart()}},X=t(3744);const ee=(0,X.Z)(Q,[["render",E]]);var ae=ee}}]);
//# sourceMappingURL=632.aa875504.js.map